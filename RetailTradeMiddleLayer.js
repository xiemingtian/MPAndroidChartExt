var RetailTradeMiddleLayer=function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";var r=i(4),o=i(5);e.exports=Object.assign({},r,o)},function(e,t,i){e.exports=i(2)},function(e,t,i){"use strict";var r=i(3),o=i(6),s=i(7),n=i(8);e.exports={thirdPartyOrderDetail:r,refundDetail:o,orderDetail:s,fulfillOrderDetail:n,getVersion:function(){return"1.2.0"}}},function(e,t,i){"use strict";var r=i(0);e.exports=function(e){if(!e)return JSON.stringify({});e=JSON.parse(e);var t={},i=e,o=i.order_activities,s=void 0===o?[]:o,n=i.item_info,a=void 0===n?[]:n,d=i.remark_info,_=void 0===d?{}:d,l=i.buyer_info,u=void 0===l?{}:l,v=i.tips,f=void 0===v?{}:v,c=i.refund_detail,p=void 0===c?{}:c,m=i.main_order_info,O=void 0===m?{}:m,y=i.operations,h=void 0===y?[]:y,T=i.order_address_info,b=void 0===T?{}:T,g=i.payment_info,E=void 0===g?{}:g,x=f.order_detail_state_tips,N=void 0===x?{}:x,D=f.order_detail_refund_tips,M=f.order_detail_express_tips;if(t.status={title:N.order_state_desc||"",subTitle:N.order_state_info||""},D&&D.refund_fee>0&&(t.refund={title:"订单已退金额",additionTitle:"¥ "+(D.refund_fee/100).toFixed(2)}),p&&p.wait_refund_orders>0&&(t.pendingRefund={title:"待处理退款",additionTitle:"共 \b"+(p.wait_refund_orders||0)+" 笔"}),M){var R="",I="";21===M.send_type?M.latest_express_state&&M.latest_express_state_time?(R=M.latest_express_state,I=r.format(M.latest_express_state_time,"YYYY-MM-DD hh:mm:ss")):(R=M.send_type_desc,I="暂无物流信息"):(R=M.send_type_desc,I="商家选择自配送，无更多物流信息"),t.rider={title:R,subTitle:I}}var P=_.seller_memo_desc,Y=void 0===P?"":P,C=_.buyer_memo_desc,S=void 0===C?"":C,L=_.reminder_items,F=void 0===L?[]:L;if(F.length){var U=F[F.length-1].reminder_time;t.reminder={title:"买家催单 "+r.format(U,"YYYY-MM-DD hh:mm"),subTitle:"建议尽快回复买家催单",operation:"回复"}}if(u.buyer_phone||u.name){var k=u.buyer_phone,A=void 0===k?"":k,H=u.name,w=void 0===H?"":H;t.buyer={title:"买家信息",subTitle:w||A}}S.length&&(t.buyerMark={title:"买家留言",subTitle:S}),Y.length&&(t.sellerMark={title:"商家备注",subTitle:Y});var J=O.express_type,G=O.express_type_desc,B=void 0===G?"":G,W=O.buy_way_desc,j=void 0===W?"":W,V=O.order_no,X=void 0===V?"":V,K=O.create_time,z=O.pay_time,q=O.express_time,Q=O.success_time,Z=b.receiver_name,$=void 0===Z?"":Z,ee=b.receiver_tel,te=void 0===ee?"":ee,ie=b.delivery_province,re=void 0===ie?"":ie,oe=b.delivery_city,se=void 0===oe?"":oe,ne=b.delivery_district,ae=void 0===ne?"":ne,de=b.delivery_country,_e=void 0===de?"":de,le=b.delivery_street,ue=void 0===le?"":le,ve=b.self_fetch_info,fe=void 0===ve?{}:ve,ce=fe.address_detail,pe=void 0===ce?"-":ce,me=fe.user_tel,Oe=void 0===me?"-":me,ye=fe.user_name,he=void 0===ye?"-":ye;if(1===J)t.selfFetch={title:"自提人："+he+" "+Oe,subTitle:"自提点："+pe};else{t.receiver={title:"收货人",subTitle:$},t.receiverMobile={title:"联系电话",subTitle:te};var Te=""+_e+re+se+ae+ue;t.receiverAddress={title:"收货地址",subTitle:Te}}a.length&&(t.goods=[],a.forEach(function(e){var i=e.title,r=void 0===i?"":i,o=e.sku_desc,s=void 0===o?"":o,n=e.img_url,a=void 0===n?"":n,d=e.refund_state_desc,_=void 0===d?"":d,l=e.unit_price,u=e.num,v=e.unit,f=e.sku_code,c=void 0===f?"":f,p=e.icons,m=void 0===p?[]:p,O=e.refund_id,y=void 0===O?"":O,h=m.map(function(e){return e.text}),T={title:r,skuDesc:s,icon:a,operation:_,price:"¥ "+(l/100).toFixed(2),count:"x "+u/1e3+" "+v,goodsNo:c?"商品编码：\b"+c:"",promotionTags:h,refundId:y};t.goods.push(T)}));var be=E.postage,ge=void 0===be?0:be,Ee=E.payment,xe=void 0===Ee?0:Ee,Ne=E.real_pay,De=void 0===Ne?0:Ne,Me=E.inner_transaction_number_list,Re=void 0===Me?[]:Me,Ie=E.outer_transaction_number_list,Pe=void 0===Ie?[]:Ie;if(B&&(t.expressType={title:"配送方式",subTitle:B+" ¥ "+(ge/100).toFixed(2)}),s.length){var Ye=0;t.promotionList=[],s.forEach(function(e){Ye+=e.decrease;var i={title:e.activity_name,subTitle:"- ¥ "+(e.decrease/100).toFixed(2)};t.promotionList.push(i)}),t.promotion={title:"优惠",subTitle:"- ¥ "+(Ye/100).toFixed(2)}}t.totalPay={title:"总计",subTitle:"¥ "+(xe/100).toFixed(2)},t.realPay={title:"实付款",detailTitle:"¥ "+(De/100).toFixed(2),subTitle:j},j&&(t.buyWay={title:j});var Ce=[];K>0&&Ce.push("创建时间："+r.format(K,"YYYY-MM-DD hh:mm:ss")),z>0&&Ce.push("付款时间："+r.format(z,"YYYY-MM-DD hh:mm:ss")),q>0&&Ce.push("发货时间："+r.format(q,"YYYY-MM-DD hh:mm:ss")),Q>0&&Ce.push("完成时间："+r.format(Q,"YYYY-MM-DD hh:mm:ss"));var Se=[];if(X.length&&Se.push("订单编号："+X),Pe.length&&Se.push("外部单号："+Pe[0]),Re.length&&Se.push("支付流水号："+Re[0]),t.orderInfo={title:"订单信息",leftList:Ce,rightList:Se},h.length){t.operations=[];for(var Le=0;Le<h.length;Le++){var Fe=h[Le],Ue=Fe.text,ke=void 0===Ue?"":Ue,Ae=Fe.code,He=void 0===Ae?"":Ae,we=Fe.disabled,Je=void 0===we?"":we,Ge=Fe.attributes,Be=void 0===Ge?{}:Ge;t.operations.unshift({title:ke,operationCode:He,disabled:Je,disabledReason:Be.reason_desc||"",highlight:!1})}}return JSON.stringify(t)}},function(e,t,i){"use strict";var r=function(e){return("0"+e).slice(-2)};t.format=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",i=new Date(e);return t.replace(/YYYY/g,i.getFullYear()).replace(/yyyy/g,i.getFullYear()).replace(/MM/g,r(i.getMonth()+1)).replace(/DD/g,r(i.getDate())).replace(/dd/g,i.getDate()).replace(/hh/g,r(i.getHours())).replace(/mm/g,r(i.getMinutes())).replace(/ss/g,r(i.getSeconds()))}},function(e,t,i){"use strict";t.convert2Hump=function e(t){t instanceof Array?t.forEach(function(t,i){e(t)}):t instanceof Object&&Object.keys(t).forEach(function(i){var r=i.replace(/_(\w)/g,function(e,t){return t.toUpperCase()});r!==i&&(t[r]=t[i],delete t[i]),e(t[r])})}},function(e,t,i){"use strict";var r=i(0);e.exports=function(e){if(!e)return JSON.stringify({});e=JSON.parse(e);var t={},i=e,o=i.consult_message_info_list,s=void 0===o?[]:o,n=i.refund_order_item_infos,a=void 0===n?[]:n,d=i.refund_order_info,_=void 0===d?{}:d,l=i.operation,u=void 0===l?[]:l,v=i.refund_tip_info,f=void 0===v?{}:v;if(t.status={title:_.status||"",subTitle:f.tips||""},s.length&&(t.consultRecord={title:s[s.length-1].status||"",subTitle:r.format(s[s.length-1].time,"YYYY-MM-DD hh:mm:ss")}),a.length&&(t.goods=[],a.forEach(function(e){var i=e.title,r=void 0===i?"":i,o=e.sku_desc,s=void 0===o?"":o,n=e.img_url,a=void 0===n?"":n,d=e.unit_price,_=e.num,l=e.sku_code,u=void 0===l?"":l,v=e.icons,f=(void 0===v?[]:v).map(function(e){return e.text}),c={title:r,skuDesc:s,icon:a,price:"¥ "+(d/100).toFixed(2),count:"x "+_/1e3,goodsNo:u,promotionTags:f};t.goods.push(c)})),_.demand_desc&&(t.refundWay={title:"退款方式",subTitle:_.demand_desc}),_.goods_status_desc&&(t.refundGoodsState={title:"货物状态",subTitle:_.goods_status_desc}),_.reason&&(t.refundReason={title:"退款原因",subTitle:_.reason}),_.phone&&(t.refundMobile={title:"联系电话",subTitle:_.phone}),t.refundMoney={title:"退款金额",detailTitle:"¥ "+(_.refund_fee/100).toFixed(2),subTitle:"含运费 ¥ "+(_.postage/100).toFixed(2)},t.refundFee=_.refund_fee,t.version=_.version,u.length){t.operations=[];for(var c=0;c<u.length;c++){var p=u[c],m=p.text,O=void 0===m?"":m,y=p.code,h=void 0===y?"":y,T=p.disabled,b=void 0===T?"":T,g=p.attributes,E=void 0===g?{}:g,x=!1;"agree_buyer_refund"===h&&(x=!0),"delivery_refunding"===h&&(E.reason_desc="退款中订单不能发货"),t.operations.push({title:O,operationCode:h,disabled:b,disabledReason:E.reason_desc||"",highlight:x})}}return JSON.stringify(t)}},function(e,t,i){"use strict";var r=i(0),o="YYYY-MM-DD hh:mm:ss",s={GIFT:1,HOTEL:35,FREE_BUY:106},n={ONLINE:0,OFFLINE:1},a={EXPRESS_DELIVERY:0,SELF_FETCH:1,LOCAL_DELIVERY:2,NONE:9},d={SYSTEM_CALL:11,SELLER_NO_EXPRESS:23,SELLER_SELF_EXPRESS_ONLINE:29,SELLER_CALL:12,NO_EXPRESS:13,E_ORDER:14,SELF_FETCH_WITH_CODE:91,SELF_FETCH_WITHOUT_CODE:92,THIRD_EXPRESS:21,SELLER_SELF_EXPRESS:22},_={PROMOTION_COUPON:"coupon",PROMOTION_COUPON_CARD:"couponCard",PROMOTION_COUPON_CODE:"couponCode",PROMOTION_MEET_REDUCE:"meetReduce",PROMOTION_ENTIRE_DISCOUNT:"entireDiscount",PROMOTION_BALE:"bale",PROMOTION_PACKAGE_BUY:"packageBuy",PROMOTION_GROUP_ON_HEADER_DICOUNT:"groupOnHeaderDiscount",PROMOTION_SECOND_HALF_DISCOUNT:"secondHalfDiscount",PROMOTION_POINT_DEDUCTION:"pointDeduction",PROMOTION_IGNORE_ODD_CHANGE:"ignoreOddChange"},l={COMMON:0,AUCTION:1,FOOD:5,FENXIAO:10,MEMBER_CARD:20,GIFT_CARD:21,MEETINGS:23,PERIOD_BUY:24,KNOWLEDGE:31,HOTEL:35,SERVICE:40,NORMAL_VIRTUAL:182,VIRTUAL_TICKET:183,OUT_MEMBER_CARD:201,OUT_CASH:202,OUT_COMMON:203,MOCK:205};function u(e,t){var i={};if(e.length){i.promotionList=[];var r=[],o=0;if(e.forEach(function(e){if(function(e,t){if(t){if(_.PROMOTION_COUPON===e||_.PROMOTION_COUPON_CARD===e||_.PROMOTION_COUPON_CODE===e||_.PROMOTION_MEET_REDUCE===e||_.PROMOTION_BALE===e||_.PROMOTION_PACKAGE_BUY===e||_.PROMOTION_GROUP_ON_HEADER_DICOUNT===e||_.PROMOTION_SECOND_HALF_DISCOUNT===e||_.PROMOTION_POINT_DEDUCTION===e)return!0}else if(_.PROMOTION_COUPON===e||_.PROMOTION_COUPON_CARD===e||_.PROMOTION_MEET_REDUCE===e||_.PROMOTION_COUPON_CODE===e||_.PROMOTION_ENTIRE_DISCOUNT===e||_.PROMOTION_BALE===e||_.PROMOTION_IGNORE_ODD_CHANGE===e||_.PROMOTION_SECOND_HALF_DISCOUNT===e||_.PROMOTION_POINT_DEDUCTION===e)return!0;return!1}(e.type,t))if(o+=e.decrease,"meetReduce"===e.type)r.push(e);else{var s={title:e.name,subTitle:"- ¥ "+(e.decrease/100).toFixed(2)};i.promotionList.push(s)}}),r.length>0)(function(e){var t=0,i=0,r=0,o=[];e.forEach(function(e){e.extra_info&&(e.extra_info.score&&(t+=parseInt(e.extra_info.score)),e.extra_info.coupon_num&&(i+=parseInt(e.extra_info.coupon_num)),0!==e.decrease&&(r+=parseInt(e.decrease)))}),o.push({title:"满减送",subTitle:"- ¥ "+(r/100).toFixed(2)}),0!==t&&o.push({title:"满减送积分",subTitle:""+t});0!==i&&o.push({title:"满减送优惠券/码",subTitle:i+" 张"});return o})(r).forEach(function(e){i.promotionList.push(e)});i.promotion={title:"优惠",subTitle:"- ¥ "+(o/100).toFixed(2)}}return null!=i.promotionList&&i.promotionList.length>0?i:null}function v(e){var t={},i=e.order_activities,_=void 0===i?[]:i,v=e.item_info,f=void 0===v?[]:v,c=e.remark_info,p=void 0===c?{}:c,m=e.buyer_info,O=void 0===m?{}:m,y=e.tips,h=void 0===y?{}:y,T=e.invoice_info,b=e.main_order_info,g=void 0===b?{}:b,E=e.operations,x=void 0===E?[]:E,N=e.order_address_info,D=void 0===N?{}:N,M=e.payment_info,R=void 0===M?{}:M,I=e.refund_detail,P=e.part_pay_detail;t.star=p.seller_star||0,t.status=function(e){var t=e.order_detail_state_tips||{};return{title:t.order_state_desc||"",subTitle:t.order_state_info||""}}(h),t.status.starCount=t.star;var Y=function(e){var t=e.order_detail_refund_tips;if(t&&t.refund_fee>0){var i=t.back_fee;return null!=i&&i>0?{title:"订单已退金额 ¥ "+(t.refund_fee/100).toFixed(2)+"（返现 ¥ "+(i/100).toFixed(2)+"）",subTitle:""}:{title:"订单已退金额 ¥ "+(t.refund_fee/100).toFixed(2),subTitle:""}}return null}(h);if(Y&&(t.refund=Y),I){var C=function(e){var t=e.wait_refund_orders;return t>0?{title:"共 "+t+" 笔退款单，待商家处理 ",subTitle:""}:null}(I);C&&(t.pendingRefund=C)}h.order_detail_express_tips&&(t.expressInfo=function(e,t,i){var s="",n="",_=!0,l=e.latest_express_state,u=e.latest_express_state_time,v=e.send_type_desc,f=t.express_type,c=e.send_type;if(f===a.EXPRESS_DELIVERY)c===d.SELLER_CALL||c===d.E_ORDER?l?(s=l,n=r.format(e.latest_express_state_time,o)):v&&(s=v,n="无更多物流信息"):c===d.NO_EXPRESS&&v&&(s=v,n="");else if(f===a.LOCAL_DELIVERY)c===d.THIRD_EXPRESS&&l?(s=l,u>0&&(n=r.format(e.latest_express_state_time,o))):v&&(s=v,n="无更多物流信息");else if(f===a.SELF_FETCH){s="自提记录";var p=t.express_time;e.have_self_fetch_record||null!=p&&p>0?n="自提时间："+r.format(p,o):(n="预约自提时间："+i.self_fetch_time,_=!1)}else f===a.NONE&&(s="核销记录");return{title:s,subTitle:n,extra:_}}(h.order_detail_express_tips,g,D));var S=g.order_type;t.buyer=function(e,t){var i=e.buyer_phone,r=void 0===i?"":i,o=e.name,s=void 0===o?"":o,n=e.buyer_id,a=void 0===n?"":n,d=e.group_is_header,_="";return _=r&&s?s+" "+r:r||s?r||s:"匿名买家","1"===(void 0===d?"":d)&&(_="(团长) "+_),{title:"买家：",subTitle:_,buyerId:3===t?"":a,buyerPhone:3===t?"":r}}(O,S);var L=function(e){var t={},i=e.seller_memo_desc,r=void 0===i?"":i,o=e.buyer_memo_desc,s=void 0===o?"":o;return s.length&&(t.buyerMark={title:"买家留言",subTitle:s}),r.length&&(t.sellerMark={title:"商家备注",subTitle:r}),t}(p);L.buyerMark&&(t.buyerMark=L.buyerMark),L.sellerMark&&(t.sellerMark=L.sellerMark);var F=function(e,t){var i={},r=e.express_type,o=t.receiver_name,n=void 0===o?"":o,a=t.receiver_tel,d=void 0===a?"":a,_=t.delivery_province,l=void 0===_?"":_,u=t.delivery_city,v=void 0===u?"":u,f=t.delivery_district,c=void 0===f?"":f,p=t.delivery_country,m=void 0===p?"":p,O=t.delivery_street,y=void 0===O?"":O,h=t.self_fetch_info,T=void 0===h?{}:h,b=t.address_extra,g=T.address_detail,E=void 0===g?"-":g,x=T.user_tel,N=void 0===x?"-":x,D=T.user_name,M=void 0===D?"-":D,R=e.order_type;if(s.GIFT===R)i.receiver={title:"礼单",subTitle:"查看礼单",extra:"toGiftList"};else if(s.HOTEL===R){var I=t.hotel_order_info;I&&(i.receiver=function(e){var t=e.recipients;if(t){if(0===t.length)return null;var i="";for(var r in t)i+=r;return{title:"入住人(共"+t.length+"人)：",subTitle:""+i}}return null}(I))}else if(183===e.order_goods_type)i.receiver={title:"联系人："+n+" "+d,subTitle:""};else{var P="";if(b){var Y=JSON.parse(b);Y.idCardNumber&&(P="身份证："+Y.idCardNumber)}if(1===r)i.receiver={title:"自提人："+M+" "+N+"  "+P,subTitle:"自提点："+E};else if(n){var C=""+m+l+v+c+y;i.receiver={title:"收货人："+n+" "+d+"  "+P,subTitle:"收货地址："+C}}}return i}(g,D);F.receiver&&(t.receiver=F.receiver);var U=g.express_type_desc,k=void 0===U?"":U,A=g.buy_way,H=g.buy_way_desc,w=void 0===H?"":H,J=g.buy_way_detail,G=void 0===J?"":J,B=g.seller_name,W=g.sale_name,j=g.cashier_name;j&&(t.cashier={title:"收银员：",subTitle:j}),(B||W)&&(t.shoppingGuide={title:"导购员：",subTitle:B||W});var V=w;A&&202===A&&(V=G);var X=function(e,t){var i={goods:[]};return e.length&&e.forEach(function(e){var o,s=e.title,n=void 0===s?"":s,a=e.sku_desc,d=void 0===a?"":a,_=e.sku_id,l=void 0===_?"":_,u=e.img_url,v=void 0===u?"":u,f=e.refund_state_desc,c=void 0===f?"":f,p=e.unit_price,m=e.origin_unit_price,O=e.is_reduce,y=e.reduce_price,h=e.goods_info,T=e.num,b=e.unit,g=e.sku_code,E=void 0===g?"":g,x=e.icons,N=void 0===x?[]:x,D=e.refund_id,M=void 0===D?"":D,R=e.buyer_memo_desc,I=void 0===R?"":R,P=e.serial_nos,Y=e.has_expressed,C=e.is_serial_item,S=e.is_present,L=e.extra,F=N.slice(0,5).map(function(e){return e.text}),U="";null!=Y&&1!==Y&&(U="待发货");var k=JSON.parse(h||"{}");k&&k.points_price>0?(o=k.points_price+" 积分",p>0&&(o=o+"+¥ "+(p/100).toFixed(2))):o=O?"¥ "+(y/100).toFixed(2):"¥ "+(p/100).toFixed(2);var A="";p!==m&&(A="¥ "+(m/100).toFixed(2));var H,w=!0,J=!1,G=void 0;try{for(var B,W=N[Symbol.iterator]();!(w=(B=W.next()).done);w=!0){var j=B.value;if(null!=j&&null!=j.code&&("groupOn"===j.code||"customerDiscount"===j.code||"timelimitedDiscount"===j.code||"auction"===j.code||"changePrice"===j.code)){A="¥ "+(m/100).toFixed(2);break}}}catch(e){J=!0,G=e}finally{try{!w&&W.return&&W.return()}finally{if(J)throw G}}if((13===t.activity_type||24===t.order_goods_type)&&L){var V=JSON.parse(L);V.firstPlanExpressTime&&(H="约定 "+r.format(V.firstPlanExpressTime,"YYYY-MM-DD")+" 首次"+(1===t.express_type?"自提":"送达"))}var X={title:n,skuDesc:d,icon:v,operation:c,price:o,originUnitPrice:A,count:"x "+T/1e3+" "+b,goodsNo:E?"商品编码：\b"+E:"",promotionTags:F,refundId:M,expressStatus:U,buyerMemoDesc:I,isSerialItem:C,serialNos:P,skuId:l,isPresent:S,periodDesc:H};i.goods.push(X)}),i}(f,g);t.goods=X.goods;var K=R.postage,z=void 0===K?0:K,q=R.payment,Q=void 0===q?0:q,Z=R.real_pay,$=void 0===Z?0:Z,ee=R.points_price,te=void 0===ee?0:ee,ie=R.inner_transaction_number_list,re=void 0===ie?[]:ie,oe=R.outer_transaction_number_list,se=void 0===oe?[]:oe;if(T){var ne=T.status;if(ne&&(10===ne||20===ne||30===ne)){var ae=T.invoice_url;t.invoiceInfo={title:"电子发票",subTitle:T.invoice_desc,extra:ae}}}var de=u(_,0===g.sale_way);de&&(de.promotionList&&(t.promotionList=de.promotionList),de.promotion&&(t.promotion=de.promotion)),t.totalPay={title:"总计",subTitle:"¥ "+(Q/100).toFixed(2)};var _e=g.order_goods_type,le=g.sale_way,ue={};g.extra_info&&(ue=JSON.parse(g.extra_info));var ve="";ue&&(ve=ue.IS_STORE_PRESALE_ORDER||""),k&&("1"===ve?t.expressType={title:"配送方式",subTitle:k+" ¥ "+(z/100).toFixed(2)}:null==_e||_e===l.NORMAL_VIRTUAL||_e===l.VIRTUAL_TICKET||S===s.HOTEL||S!==s.FREE_BUY&&le===n.OFFLINE||(t.expressType={title:"配送方式",subTitle:k+" ¥ "+(z/100).toFixed(2)})),(g.pay_time&&g.pay_time>0||null!=P)&&(t.realPay={title:"实付款",detailTitle:"¥ "+($/100).toFixed(2),subTitle:V}),V&&(t.buyWay={title:V,showPartPays:!1}),te&&(t.pointsPrice={title:"使用 "+te+" 积分兑换"});var fe=function(e){var t={},i=!1;if(e.price_order_promotions){var r=!0,o=!1,s=void 0;try{for(var n,a=e.price_order_promotions[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var d=n.value;if(d.change_type&&"edit_goods".toLowerCase()===d.change_type.toLowerCase()){var _=d.new_value-d.old_value;if(0!==_){var l=Math.abs(_),u="-";_>0&&(u="+"),i=!0,t.changePrice={title:"改价",subTitle:u+" ¥ "+(l/100).toFixed(2)}}break}}}catch(e){o=!0,s=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw s}}}return null!=e.payment_info&&e.payment_info.gift_card_real_pay>0&&(i=!0,t.giftCard={title:"礼品卡",subTitle:"- ¥ "+(e.payment_info.gift_card_real_pay/100).toFixed(2)}),i?t:null}(e);fe&&(fe.changePrice&&(t.changePrice=fe.changePrice),fe.giftCard&&(t.giftCard=fe.giftCard));var ce=function(e,t,i){var s=e.order_no,n=void 0===s?"":s,a=e.out_biz_no,d=void 0===a?"":a,_=e.create_time,l=e.pay_time,u=e.express_time,v=e.success_time,f=e.close_time,c=[];_>0&&c.push("创建时间："+r.format(_,o)),l>0&&c.push("付款时间："+r.format(l,o)),u>0&&c.push("发货时间："+r.format(u,o)),v>0&&c.push("完成时间："+r.format(v,o)),f&&c.push("关单时间："+r.format(f,o));var p=[];return n.length&&p.push("订单编号："+n),d.length&&"L"===d.substring(0,1)&&p.push("离线单号："+d),i.length&&p.push("外部单号："+i[0]),t.length&&p.push("支付流水号："+t[0]),{title:"订单信息",leftList:c,rightList:p}}(g,re,se);t.orderInfo=ce;var pe=function(e){var t=[],i=[];if(e.length)for(var r=0;r<e.length;r++){var o=e[r],s=o.text,n=void 0===s?"":s,a=o.code,d=void 0===a?"":a,_=o.disabled,l=void 0===_?"":_,u=o.attributes,v=void 0===u?{}:u,f="receipt"===d,c=n;"delivery"===d&&v.issue&&(c=n+"\n"+v.issue);var p={title:c,operationCode:d,disabled:l,disabledReason:v.reason_desc||"",highlight:f};"print_order"===d||"create_invoice"===d?i.unshift(p):t.unshift(p)}return{operations:t,moreOperations:i}}(x);if(t.operations=pe.operations,t.moreOperations=pe.moreOperations,P){var me=P.remain_fee,Oe=void 0===me?0:me,ye=P.part_pays,he=void 0===ye?[]:ye,Te="已付齐";if(Oe>0&&(Te="还差 ¥ "+(Oe/100).toFixed(2)+" 付齐"),t.buyWay.title&&(t.buyWay.title+="，"+Te),he.length){for(var be=[],ge=0;ge<he.length;ge++){var Ee=he[ge],xe=Ee.name,Ne=Ee.real_pay,De=Ee.pay_way_desc,Me=Ee.pay_time,Re={name:xe,realPay:"¥ "+(Ne/100).toFixed(2),payWayDesc:De,payTimeDesc:r.format(Me,o)};be.unshift(Re)}t.partPays=be,t.buyWay.showPartPays=!0}}return JSON.stringify(t)}e.exports=function(e){return(e=JSON.parse(e))?v(e):JSON.stringify({})}},function(e,t,i){"use strict";var r=i(0),o=0,s=1;e.exports=function(e){if(!e)return JSON.stringify({});e=JSON.parse(e);var t={},i=e,n=i.item_info,a=void 0===n?[]:n,d=i.remark_info,_=void 0===d?{}:d,l=i.main_order_info,u=void 0===l?{}:l,v=i.operations,f=void 0===v?[]:v,c=i.order_address_info,p=void 0===c?{}:c,m=i.fulfill_order,O=void 0===m?{}:m,y=i.tips,h=void 0===y?{}:y,T=u.express_type,b=u.express_type_desc,g=void 0===b?"":b,E=u.buy_way_desc,x=void 0===E?"":E,N=u.order_no,D=void 0===N?"":N,M=u.create_time,R=u.pay_time,I=u.express_time,P=O.dist_type,Y=O.post_fee,C=void 0===Y?0:Y,S=O.real_delivery_fee,L=void 0===S?0:S,F=O.fulfill_no,U=void 0===F?"":F,k=h.fulfill_state_tips,A=void 0===k?{}:k,H=h.order_detail_express_tips,w=1===T?s:o;if(t.status={title:A.fulfill_state||"",subTitle:A.fulfill_state_info||""},H){var J="",G="",B=!0;if(0===P)12===H.send_type?H.latest_express_state&&H.latest_express_state_time?(J=H.latest_express_state||"",G=r.format(H.latest_express_state_time,"YYYY-MM-DD hh:mm:ss")):(J=H.send_type_desc||"",G="暂无物流信息"):13===H.send_type&&(J=H.send_type_desc||"");else if(1===P&&H.have_self_fetch_record)J="自提记录",G="买家会尽快到店自提",H.have_self_fetch_record||I?G="自提时间："+r.format(I,"YYYY-MM-DD hh:mm"):(G="预约自提时间："+p.self_fetch_time,B=!1);else if(2===P){if(J=H.send_type_desc||"",p.delivery_start_time&&p.delivery_end_time)G="需要在 "+r.format(p.delivery_start_time,"YYYY-MM-DD hh:mm")+"-"+r.format(p.delivery_end_time,"hh:mm")+" 送达"}else 9===P&&H.have_verify_record&&(J="核销记录",G="点击查看详情");J.length&&(t.expressInfo={title:J,subTitle:G,extra:B})}var W=p.receiver_name,j=void 0===W?"":W,V=p.receiver_tel,X=void 0===V?"":V,K=p.delivery_province,z=void 0===K?"":K,q=p.delivery_city,Q=void 0===q?"":q,Z=p.delivery_district,$=void 0===Z?"":Z,ee=p.delivery_country,te=void 0===ee?"":ee,ie=p.delivery_street,re=void 0===ie?"":ie,oe=p.self_fetch_info,se=void 0===oe?{}:oe,ne=p.address_extra,ae=se.address_detail,de=void 0===ae?"-":ae,_e=se.user_tel,le=void 0===_e?"-":_e,ue=se.user_name,ve=void 0===ue?"-":ue,fe="";if(ne){var ce=JSON.parse(ne);ce.idCardNumber&&(fe="身份证："+ce.idCardNumber)}if(w===s)t.receiver={title:"自提人："+ve+" "+le+"  "+fe,subTitle:"自提点："+de};else{var pe=""+te+z+Q+$+re;t.receiver={title:"收货人："+j+" "+X+"  "+fe,subTitle:"收货地址："+pe}}var me=_.seller_memo_desc,Oe=void 0===me?"":me,ye=_.buyer_memo_desc,he=void 0===ye?"":ye,Te=_.delivery_remark,be=void 0===Te?"":Te;he.length&&(t.buyerMark={title:"买家留言",subTitle:he}),Oe.length&&(t.sellerMark={title:"商家备注",subTitle:Oe}),be.length&&(t.deliveryMark={title:w===s?"自提备注":"发货备注",subTitle:be}),a.length&&(t.goods=[],a.forEach(function(e){var i,o=e.title,s=void 0===o?"":o,n=e.sku_desc,a=void 0===n?"":n,d=e.sku_id,_=void 0===d?"":d,l=e.img_url,v=void 0===l?"":l,f=e.num,c=e.unit,p=e.sku_code,m=void 0===p?"":p,O=e.icons,y=void 0===O?[]:O,h=e.delivery_status_desc,T=void 0===h?"":h,b=e.buyer_memo_desc,g=void 0===b?"":b,E=e.serial_nos,x=e.is_serial_item,N=e.is_present,D=e.extra,M=y.map(function(e){return e.text});if((13===u.activity_type||24===u.order_goods_type)&&D){var R=JSON.parse(D);if(R.firstPlanExpressTime)i="约定 "+r.format(R.firstPlanExpressTime,"YYYY-MM-DD")+" 首次"+(1===u.express_type?"自提":"送达")}var I={title:s,skuDesc:a,icon:v,count:"x "+f/1e3+" "+c,goodsNo:m?"商品编码：\b"+m:"",promotionTags:M,expressStatus:T,buyerMemoDesc:g,isSerialItem:x,serialNos:E,skuId:_,isPresent:N,periodDesc:i};t.goods.push(I)})),g&&(t.expressType={title:"配送方式",subTitle:g+" ¥ "+(C/100).toFixed(2)}),t.realPay={title:"实付运费",detailTitle:"¥ "+(L/100).toFixed(2),subTitle:x},x&&(t.buyWay={title:x});var ge=[];if(M>0&&ge.push("创建时间："+r.format(M,"YYYY-MM-DD hh:mm:ss")),R>0&&ge.push("付款时间："+r.format(R,"YYYY-MM-DD hh:mm:ss")),I>0){var Ee=w===s?"自提时间：":"发货时间：";ge.push(""+Ee+r.format(I,"YYYY-MM-DD hh:mm:ss"))}var xe=[];if(D.length&&xe.push("订单编号："+D),U.length){var Ne=w===s?"自提单号：":"发货单号：";xe.push(""+Ne+U)}if(t.orderInfo={title:"订单信息",leftList:ge,rightList:xe},f.length){t.operations=[];for(var De=0;De<f.length;De++){var Me=f[De],Re=Me.text,Ie=void 0===Re?"":Re,Pe=Me.code,Ye=void 0===Pe?"":Pe,Ce=Me.disabled,Se=void 0===Ce?"":Ce,Le=Me.attributes,Fe=void 0===Le?{}:Le;t.operations.unshift({title:Ie,operationCode:Ye,disabled:Se,disabledReason:Fe.reason_desc||"",highlight:!1})}}return JSON.stringify(t)}}]);